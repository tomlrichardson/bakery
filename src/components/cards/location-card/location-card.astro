---
import type { ImageMetadata } from 'astro';
import { Image } from 'astro:assets';
import Icon from '../../utility/icon';

interface Props {
  heading: string;
  text: string;
  location: string;
  image: {
    image_path: string;
    image_alt: string;
  };
  link: string;
}

const block = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
  '/src/assets/**/*.{jpeg,jpg,png,gif,svg}',
  { eager: true }
);

const imageSrc =
  images[block.image.image_path]?.default ?? block.image.image_path;
---

<a class="card" href={block.link}>
  <div class="image">
    {
      block.image.image_path ? (
        <Image
          class="hero__img"
          alt={block.image.image_alt}
          src={imageSrc}
          width={500}
          height={400}
        />
      ) : null
    }
    <h2>{block.heading}</h2>
    <p><span><Icon icon={'locationPin'} /></span>{block.location}</p>
    <p>{block.text}</p>
  </div>
</a>
